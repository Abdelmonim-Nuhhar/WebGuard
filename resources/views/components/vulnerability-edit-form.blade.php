@extends('layouts.new-app')

@section('content')
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="{{ asset('js/vulnerability.js') }}"></script>
<div id="vulnerabilityEdit" class="p-6 w-full lg:w-2/3">
    <!-- Explanation of the form -->
    <div class="mb-4 text-gray-700">
        <p class="mb-2 mb-2 font-mono text-blue-900 text-xl font-semibold">This form allows you to update a vulnerability.</p>
    </div>

    <!-- form content -->
    <div class="productlist p-2">
        @if ($errors->any())
        <div class="bg-red-600 border-solid rounded-md border-2 border-red-700">
            <ul>
                @foreach ($errors->all() as $error)
                <li class="text-lg text-gray-100">{{ $error }}</li>
                @endforeach
            </ul>
        </div>
        @endif
        <form method="POST" action="">
            @method('PUT')
            @csrf
            <div class="p-2 m-2 rounded-lg shadow-lg bg-gray-50 border-2 border-blue-900 max-w-xl">
                <!-- Input field for vulnerability name -->
                <div class="font-bold text-sm mb-2">
                    <input class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3" value="{{ $vulnerability->name }}" id="name" name="name" type="text" placeholder="V-Name">
                    <!-- Tooltip for additional information -->
                    <div class="tooltip" data-tooltip="Enter the name of the vulnerability.">
                        <i class="fas fa-info-circle"></i>
                    </div>
                </div>
                <!-- Input field for vulnerability severity -->
                <p class="text-gray-700 text-sm">
                    <input class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3" value="{{ $vulnerability->severity }}" id="severity" name="severity" type="text" placeholder="V-Severity">
                    <!-- Tooltip for additional information -->
                    <div class="tooltip" data-tooltip="Specify the severity of the vulnerability.">
                        <i class="fas fa-info-circle"></i>
                    </div>
                </p>
                <!-- Textarea field for vulnerability mitigation -->
                <p class="text-gray-700 text-sm">
                    <textarea class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3" cols="30" rows="10" id="mitigation" name="mitigation" type="text" placeholder="V-Mitigation">{{ $vulnerability->mitigation }}</textarea>
                    <!-- Tooltip for additional information -->
                    <div class="tooltip" data-tooltip="Describe the mitigation for the vulnerability."></div>
                </p>
                <!-- Input field for vulnerability fix status -->
                <p class="text-gray-700 text-sm">
                    <input class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3" value="{{ $vulnerability->is_fixed }}" id="is_fixed" name="is_fixed" type="number" min="0" max="1" placeholder="Fix Status">
                    <!-- Tooltip for additional information -->
                    <div class="tooltip" data-tooltip="Set the fix status of the vulnerability (1 for fixed, 0 for not fixed)."></div>
                </p>
                <!-- Textarea field for vulnerability description -->
                <p class="text-gray-700 text-sm">
                    <textarea class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3" id="description" name="description" placeholder="V - Description" cols="30" rows="10">{{ $vulnerability->description }}</textarea>
                    <!-- Tooltip for additional information -->
                    <div class="tooltip" data-tooltip="Provide a detailed description of the vulnerability."></div>
                </p>
                <div class="flex items-center justify-between mt-4">
                    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded text-xs uppercase hover:underline font-semibold">Update</button>
                    <button value="{{ $vulnerability->id }}" type="button" class="bg-red-400 text-white px-4 py-2 rounded text-xs uppercase hover:underline font-semibold remove-v">Remove</button>
                </div>
            </div>
        </form>
    </div>
</div>
@endsection
